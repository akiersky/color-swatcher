{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/color-swatcher.js","webpack://exports/external \"sketch\""],"names":["doc","sketch","getSelectedDocument","page","selectedPage","selectedLayers","selectedCount","length","createStylesheet","UI","message","fillcolor","layers","style","fills","color","slice","createSwatch","styles","sharedLayerStyles","group","Group","parent","name","s","hasOwnProperty","stylecolor","offset","swatch","frame","Rectangle","rectcolor","Shape","borders","enabled","rectwhite","rectblack","whitecontrast","contrast","hexToRgb","toFixed","whiteratio","Text","text","checkWCAG","blackcontrast","blackratio","contrastColor","textcolor","ntc","fixedWidth","luminanace","r","g","b","a","map","v","Math","pow","rgb1","rgb2","result","ratio","hex","exec","parseInt"],"mappings":";;;;;;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;AClFA;AAAA;AAAA;AAAA;AAEA,IAAMA,GAAG,GAAGC,6CAAM,CAACC,mBAAP,EAAZ;AACA,IAAMC,IAAI,GAAGH,GAAG,CAACI,YAAjB;AAEe,2EAAW;AACzB,MAAMC,cAAc,GAAGL,GAAG,CAACK,cAA3B;AACA,MAAMC,aAAa,GAAGD,cAAc,CAACE,MAArC;;AAGA,MAAID,aAAa,IAAI,CAArB,EAAwB;AACvBE,oBAAgB,CAACR,GAAD,CAAhB;AAEEC,iDAAM,CAACQ,EAAP,CAAUC,OAAV,CAAkB,gCAAlB;AACF,GAJD,MAKK;AACJ,QAAMC,SAAS,GAAGX,GAAG,CAACK,cAAJ,CAAmBO,MAAnB,CAA0B,CAA1B,EAA6BC,KAA7B,CAAmCC,KAAnC,CAAyC,CAAzC,EAA4CC,KAA5C,CAAkDC,KAAlD,CAAwD,CAAxD,EAA2D,CAA3D,CAAlB;AAEAC,gBAAY,CAACN,SAAD,EAAY,CAAZ,EAAeR,IAAf,CAAZ;AACEF,iDAAM,CAACQ,EAAP,CAAUC,OAAV,CAAkB,4BAAlB;AACF;AACD;;AAED,SAASF,gBAAT,CAA0BR,GAA1B,EAA+B;AAC9B,MAAMkB,MAAM,GAAGlB,GAAG,CAACmB,iBAAnB,CAD8B,CAE9B;;AAEA,MAAMC,KAAK,GAAG,IAAInB,6CAAM,CAACoB,KAAX,CAAiB;AAC9BC,UAAM,EAACnB,IADuB;AAE9BoB,QAAI,EAAE;AAFwB,GAAjB,CAAd;;AAKA,OAAK,IAAIC,CAAT,IAAcN,MAAd,EAAsB;AACrB,QAAGA,MAAM,CAACO,cAAP,CAAsBD,CAAtB,CAAH,EAA4B;AAC3B;AACA,UAAME,UAAU,GAAGR,MAAM,CAACM,CAAD,CAAN,CAAUX,KAAV,CAAgBC,KAAhB,CAAsB,CAAtB,EAAyBC,KAAzB,CAA+BC,KAA/B,CAAqC,CAArC,EAAwC,CAAxC,CAAnB;AACAC,kBAAY,CAACS,UAAD,EAAaF,CAAb,EAAgBJ,KAAhB,CAAZ;AACA;AACD;AACD;;AAED,SAASH,YAAT,CAAsBF,KAAtB,EAA6BY,MAA7B,EAAqCL,MAArC,EAA6C;AAC5C;AACA;AAEA;AACA,MAAMM,MAAM,GAAG,IAAI3B,6CAAM,CAACoB,KAAX,CAAiB;AAC/BC,UAAM,EAACA,MADwB;AAE/BC,QAAI,EAAER,KAAK,GAAG,SAFiB;AAG/Bc,SAAK,EAAE,IAAI5B,6CAAM,CAAC6B,SAAX,CAAqB,MAAIH,MAAzB,EAAiC,CAAjC,EAAoC,GAApC,EAAyC,GAAzC;AAHwB,GAAjB,CAAf,CAL4C,CAU5C;;AACA,MAAMI,SAAS,GAAG,IAAI9B,6CAAM,CAAC+B,KAAX,CAAiB;AAClCV,UAAM,EAAEM,MAD0B;AAElCC,SAAK,EAAE,IAAI5B,6CAAM,CAAC6B,SAAX,CAAqB,CAArB,EAAwB,CAAxB,EAA2B,GAA3B,EAAgC,EAAhC,CAF2B;AAGlCjB,SAAK,EAAE;AAACC,WAAK,EAAE,CAAC;AAAEC,aAAK,EAAEA;AAAT,OAAD,CAAR;AAA4BkB,aAAO,EAAE,CAAC;AAACC,eAAO,EAAC;AAAT,OAAD;AAArC;AAH2B,GAAjB,CAAlB,CAX4C,CAgB5C;;AACA,MAAMC,SAAS,GAAG,IAAIlC,6CAAM,CAAC+B,KAAX,CAAiB;AAClCV,UAAM,EAAEM,MAD0B;AAElCC,SAAK,EAAE,IAAI5B,6CAAM,CAAC6B,SAAX,CAAqB,CAArB,EAAwB,EAAxB,EAA4B,GAA5B,EAAiC,EAAjC,CAF2B;AAGlCjB,SAAK,EAAE;AAACC,WAAK,EAAE,CAAC;AAAEC,aAAK,EAAE;AAAT,OAAD,CAAR;AAAgCkB,aAAO,EAAE,CAAC;AAACC,eAAO,EAAC;AAAT,OAAD;AAAzC;AAH2B,GAAjB,CAAlB,CAjB4C,CAsB5C;;AACA,MAAME,SAAS,GAAG,IAAInC,6CAAM,CAAC+B,KAAX,CAAiB;AAClCV,UAAM,EAAEM,MAD0B;AAElCC,SAAK,EAAE,IAAI5B,6CAAM,CAAC6B,SAAX,CAAqB,CAArB,EAAwB,EAAxB,EAA4B,GAA5B,EAAiC,EAAjC,CAF2B;AAGlCjB,SAAK,EAAE;AAACC,WAAK,EAAE,CAAC;AAAEC,aAAK,EAAE;AAAT,OAAD,CAAR;AAAgCkB,aAAO,EAAE,CAAC;AAACC,eAAO,EAAC;AAAT,OAAD;AAAzC;AAH2B,GAAjB,CAAlB,CAvB4C,CA6B5C;;AACA,MAAMG,aAAa,GAAGC,QAAQ,CAAC,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAD,EAAkBC,QAAQ,CAACxB,KAAD,CAA1B,CAAR,CAA2CyB,OAA3C,CAAmD,CAAnD,CAAtB;AAEA,MAAMC,UAAU,GAAG,IAAIxC,6CAAM,CAACyC,IAAX,CAAgB;AAClCpB,UAAM,EAAEM,MAD0B;AAElCe,QAAI,EAAEN,aAAa,GAAG,KAAhB,GAAwBO,SAAS,CAACP,aAAD,CAFL;AAGlCR,SAAK,EAAE,IAAI5B,6CAAM,CAAC6B,SAAX,CAAqB,CAArB,EAAwB,EAAxB,EAA4B,EAA5B,EAAgC,EAAhC,CAH2B;AAIlCjB,SAAK,EAAE;AAACC,WAAK,EAAE,CAAC;AAAEC,aAAK,EAAE;AAAT,OAAD,CAAR;AAAgCkB,aAAO,EAAE,CAAC;AAACC,eAAO,EAAC;AAAT,OAAD;AAAzC;AAJ2B,GAAhB,CAAnB,CAhC4C,CAuC5C;;AACA,MAAMW,aAAa,GAAGP,QAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAD,EAAYC,QAAQ,CAACxB,KAAD,CAApB,CAAR,CAAqCyB,OAArC,CAA6C,CAA7C,CAAtB;AACA,MAAMM,UAAU,GAAG,IAAI7C,6CAAM,CAACyC,IAAX,CAAgB;AAClCpB,UAAM,EAAEM,MAD0B;AAElCe,QAAI,EAAEE,aAAa,GAAG,KAAhB,GAAwBD,SAAS,CAACC,aAAD,CAFL;AAGlChB,SAAK,EAAE,IAAI5B,6CAAM,CAAC6B,SAAX,CAAqB,CAArB,EAAwB,EAAxB,EAA4B,EAA5B,EAAgC,EAAhC,CAH2B;AAIlCjB,SAAK,EAAE;AAACC,WAAK,EAAE,CAAC;AAAEC,aAAK,EAAE;AAAT,OAAD,CAAR;AAAgCkB,aAAO,EAAE,CAAC;AAACC,eAAO,EAAC;AAAT,OAAD;AAAzC;AAJ2B,GAAhB,CAAnB;AAOA,MAAMa,aAAa,GAAIV,aAAa,GAAGQ,aAAhB,GAAgC,CAAjC,GAAsC,SAAtC,GAAkD,SAAxE,CAhD4C,CAiD5C;;AACA,MAAMG,SAAS,GAAG,IAAI/C,6CAAM,CAACyC,IAAX,CAAgB;AACjCpB,UAAM,EAAEM,MADyB;AAEjCe,QAAI,EAAEM,GAAG,CAAC1B,IAAJ,CAASR,KAAT,IAAkB,IAAlB,GAAyBA,KAFE;AAGjCmC,cAAU,EAAE,IAHqB;AAIjCrB,SAAK,EAAE,IAAI5B,6CAAM,CAAC6B,SAAX,CAAqB,CAArB,EAAwB,EAAxB,EAA4B,EAA5B,EAAgC,EAAhC,CAJ0B;AAKjCjB,SAAK,EAAE;AAACC,WAAK,EAAE,CAAC;AAAEC,aAAK,EAAEgC;AAAT,OAAD,CAAR;AAAoCd,aAAO,EAAE,CAAC;AAACC,eAAO,EAAC;AAAT,OAAD;AAA7C;AAL0B,GAAhB,CAAlB,CAlD4C,CA0D5C;AACA;AACA,C,CACD;AACA;AACA;;;AACA,SAASiB,UAAT,CAAoBC,CAApB,EAAuBC,CAAvB,EAA0BC,CAA1B,EAA6B;AACzB,MAAIC,CAAC,GAAG,CAACH,CAAD,EAAIC,CAAJ,EAAOC,CAAP,EAAUE,GAAV,CAAc,UAAUC,CAAV,EAAa;AAC/BA,KAAC,IAAI,GAAL;AACA,WAAOA,CAAC,IAAI,OAAL,GACDA,CAAC,GAAG,KADH,GAEDC,IAAI,CAACC,GAAL,CAAU,CAACF,CAAC,GAAG,KAAL,IAAc,KAAxB,EAA+B,GAA/B,CAFN;AAGH,GALO,CAAR;AAMA,SAAOF,CAAC,CAAC,CAAD,CAAD,GAAO,MAAP,GAAgBA,CAAC,CAAC,CAAD,CAAD,GAAO,MAAvB,GAAgCA,CAAC,CAAC,CAAD,CAAD,GAAO,MAA9C;AACH,C,CACD;;;AACA,SAASjB,QAAT,CAAkBsB,IAAlB,EAAwBC,IAAxB,EAA8B;AAC7B,MAAIC,MAAM,GAAG,CAACX,UAAU,CAACS,IAAI,CAAC,CAAD,CAAL,EAAUA,IAAI,CAAC,CAAD,CAAd,EAAmBA,IAAI,CAAC,CAAD,CAAvB,CAAV,GAAwC,IAAzC,KACLT,UAAU,CAACU,IAAI,CAAC,CAAD,CAAL,EAAUA,IAAI,CAAC,CAAD,CAAd,EAAmBA,IAAI,CAAC,CAAD,CAAvB,CAAV,GAAwC,IADnC,CAAb;AAEA,MAAIC,MAAM,GAAG,CAAb,EAAgBA,MAAM,GAAG,IAAEA,MAAX;AAChB,SAAOA,MAAP;AACA,C,CAED;AACA;AACA;AACA;AAEA;AACA;;;AAEA,SAASlB,SAAT,CAAmBmB,KAAnB,EAA0B;AACzB,MAAIA,KAAK,IAAI,CAAb,EAAgB;AACf,WAAO,IAAP;AACA,GAFD,MAEO,IAAIA,KAAK,IAAI,GAAb,EAAkB;AACxB,WAAO,WAAP;AACA,GAFM,MAEA,IAAIA,KAAK,IAAI,CAAb,EAAgB;AACtB,WAAO,UAAP;AACA,GAFM,MAEA;AACN,WAAO,GAAP;AACA;AACD,C,CAED;AACA;;;AACA,SAASxB,QAAT,CAAkByB,GAAlB,EAAuB;AACnB,MAAIF,MAAM,GAAG,4CAA4CG,IAA5C,CAAiDD,GAAjD,CAAb;AACA,SAAOF,MAAM,GAAG,CACZI,QAAQ,CAACJ,MAAM,CAAC,CAAD,CAAP,EAAY,EAAZ,CADI,EAEZI,QAAQ,CAACJ,MAAM,CAAC,CAAD,CAAP,EAAY,EAAZ,CAFI,EAGZI,QAAQ,CAACJ,MAAM,CAAC,CAAD,CAAP,EAAY,EAAZ,CAHI,CAAH,GAIT,IAJJ;AAKH,C;;;;;;;;;;;ACvJD,mC","file":"color-swatcher.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/color-swatcher.js\");\n","import sketch from 'sketch'\n\nconst doc = sketch.getSelectedDocument()  \nconst page = doc.selectedPage\n\nexport default function() {\n\tconst selectedLayers = doc.selectedLayers\n\tconst selectedCount = selectedLayers.length\n \n\n\tif (selectedCount == 0) {\n\t\tcreateStylesheet(doc);\n\n  \t\tsketch.UI.message(\"Swatch stylesheet generated 🙌\")\n\t} \n\telse {\n\t\tconst fillcolor = doc.selectedLayers.layers[0].style.fills[0].color.slice(0, 7)\n\t\t\n\t\tcreateSwatch(fillcolor, 0, page);\n  \t\tsketch.UI.message(\"Single swatch generated 🙌\")\n\t}\n}\n\nfunction createStylesheet(doc) {\n\tconst styles = doc.sharedLayerStyles;\n\t//log(styles)\n\n\tconst group = new sketch.Group({\n\t\tparent:page,\n\t\tname: \"Styles\"\n\t})\n\n\tfor (var s in styles) {\n\t\tif(styles.hasOwnProperty(s)){\n\t\t\t//log(styles[s].name)\n\t\t\tconst stylecolor = styles[s].style.fills[0].color.slice(0, 7)\n\t\t\tcreateSwatch(stylecolor, s, group)\n\t\t}\n\t}\n}\n\nfunction createSwatch(color, offset, parent) {\n\t// log(color)\n\t// log(ntc.name(color))\n\n\t// group for the created swatch\n\tconst swatch = new sketch.Group({\n\t\tparent:parent,\n\t\tname: color + \" swatch\",\n\t\tframe: new sketch.Rectangle(110*offset, 0, 100, 100)\n\t})\n\t// rectangle background same color as the swatch\n\tconst rectcolor = new sketch.Shape({\n\t\tparent: swatch,\n\t\tframe: new sketch.Rectangle(0, 0, 100, 40),\n\t\tstyle: {fills: [{ color: color }], borders: [{enabled:false}] }\n\t})\n\t// rectangle background same color as the swatch\n\tconst rectwhite = new sketch.Shape({\n\t\tparent: swatch,\n\t\tframe: new sketch.Rectangle(0, 40, 100, 40),\n\t\tstyle: {fills: [{ color: '#ffffff' }], borders: [{enabled:false}] }\n\t})\n\t// rectangle background same color as the swatch\n\tconst rectblack = new sketch.Shape({\n\t\tparent: swatch,\n\t\tframe: new sketch.Rectangle(0, 80, 100, 40),\n\t\tstyle: {fills: [{ color: '#000000' }], borders: [{enabled:false}] }\n\t})\n\n\t//text showing contrast against white\n\tconst whitecontrast = contrast([255, 255, 255], hexToRgb(color)).toFixed(1)\n\n\tconst whiteratio = new sketch.Text({\n\t\tparent: swatch,\n\t\ttext: whitecontrast + \":1 \" + checkWCAG(whitecontrast),\n\t\tframe: new sketch.Rectangle(8, 55, 92, 40),\n\t\tstyle: {fills: [{ color: '#000000' }], borders: [{enabled:false}] }\n\t})\n\n\t//text showing contrast against black\n\tconst blackcontrast = contrast([0, 0, 0], hexToRgb(color)).toFixed(1)\n\tconst blackratio = new sketch.Text({\n\t\tparent: swatch,\n\t\ttext: blackcontrast + \":1 \" + checkWCAG(blackcontrast),\n\t\tframe: new sketch.Rectangle(8, 95, 92, 40),\n\t\tstyle: {fills: [{ color: '#ffffff' }], borders: [{enabled:false}] }\n\t})\n\n\tconst contrastColor = (whitecontrast / blackcontrast > 1) ? '#ffffff' : '#000000'\n\t// text showing the color of the swatch\n\tconst textcolor = new sketch.Text({\n\t\tparent: swatch,\n\t\ttext: ntc.name(color) + \"\\n\" + color,\n\t\tfixedWidth: true,\n\t\tframe: new sketch.Rectangle(8, 15, 92, 40),\n\t\tstyle: {fills: [{ color: contrastColor }], borders: [{enabled:false}] }\n\t})\n\n\t// log(whitecontrast)\n\t// log(blackcontrast)\n}\n////////////////////////////////// HELPER FUNCTIONS/////////////////////////////////\n// from: https://stackoverflow.com/questions/9733288/how-to-programmatically-calculate-the-contrast-ratio-between-two-colors\n// calculate luminanace of a color\nfunction luminanace(r, g, b) {\n    var a = [r, g, b].map(function (v) {\n        v /= 255\n        return v <= 0.03928\n            ? v / 12.92\n            : Math.pow( (v + 0.055) / 1.055, 2.4 )\n    });\n    return a[0] * 0.2126 + a[1] * 0.7152 + a[2] * 0.0722\n}\n//calculate contrast between two rgb colors\nfunction contrast(rgb1, rgb2) { \n\tvar result = (luminanace(rgb1[0], rgb1[1], rgb1[2]) + 0.05) \n\t\t\t   / (luminanace(rgb2[0], rgb2[1], rgb2[2]) + 0.05); \n\tif (result < 1) result = 1/result; \n\treturn result; \n}\n\n// WCAG 2 level AA requires a contrast ratio of at least 4.5:1 for normal text \n//and 3:1 for large text, and a contrast ratio of at least 3:1 for graphics \n//and user interface components (such as form input borders). \n//Level AAA requires a contrast ratio of at least 7:1 for normal text and 4.5:1 for large text.\n\n//Large text is defined as 14 point (typically 18.66px) and bold or larger, \n//or 18 point (typically 24px) or larger.\n\nfunction checkWCAG(ratio) {\n\tif (ratio >= 7) {\n\t\treturn '✔︎'\n\t} else if (ratio >= 4.5) {\n\t\treturn 'Large AAA'\n\t} else if (ratio >= 3) {\n\t\treturn 'Large AA'\n\t} else {\n\t\treturn '✘'\n\t}\n}\n\n// from: https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb\n//convert from hex to rgb\nfunction hexToRgb(hex) {\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex)\n    return result ? [\n        parseInt(result[1], 16),\n        parseInt(result[2], 16),\n        parseInt(result[3], 16)\n    ] : null\n}\n","module.exports = require(\"sketch\");"],"sourceRoot":""}